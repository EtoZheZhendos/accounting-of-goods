<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.store.inventory.controller.MovementDialogController"
      spacing="15" styleClass="dialog-content" prefWidth="700" prefHeight="600">
    
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <Label text="Перемещение товара между складами" styleClass="dialog-header"/>

    <TitledPane text="Реквизиты документа" collapsible="false">
        <GridPane hgap="10" vgap="10">
            <columnConstraints>
                <ColumnConstraints minWidth="150" prefWidth="150"/>
                <ColumnConstraints minWidth="200" prefWidth="250" hgrow="ALWAYS"/>
            </columnConstraints>

            <Label text="Номер документа:*" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
            <TextField fx:id="documentNumberField" promptText="Введите номер" 
                      GridPane.rowIndex="0" GridPane.columnIndex="1"/>

            <Label text="Дата документа:*" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
            <DatePicker fx:id="documentDatePicker" 
                       GridPane.rowIndex="1" GridPane.columnIndex="1" maxWidth="Infinity"/>
        </GridPane>
    </TitledPane>

    <VBox spacing="10">
        <Label text="1. Выберите номенклатуру:" style="-fx-font-weight: bold;"/>
        <ComboBox fx:id="nomenclatureCombo" promptText="Выберите товар" 
                  maxWidth="Infinity" onAction="#handleNomenclatureSelected"/>
    </VBox>

    <VBox spacing="10">
        <Label text="2. Выберите позиции для перемещения:" style="-fx-font-weight: bold;"/>
        <TableView fx:id="itemsTable" VBox.vgrow="ALWAYS" prefHeight="200">
            <columns>
                <TableColumn fx:id="colArticle" text="Артикул" prefWidth="100"/>
                <TableColumn fx:id="colName" text="Наименование" prefWidth="150"/>
                <TableColumn fx:id="colBatch" text="Партия" prefWidth="80"/>
                <TableColumn fx:id="colWarehouse" text="Склад (источник)" prefWidth="120"/>
                <TableColumn fx:id="colQuantity" text="Количество" prefWidth="80"/>
                <TableColumn fx:id="colSelect" text="Выбрать" prefWidth="60"/>
            </columns>
        </TableView>
    </VBox>

    <VBox spacing="10">
        <Label text="3. Выберите склад-приёмник:" style="-fx-font-weight: bold;"/>
        <ComboBox fx:id="targetWarehouseCombo" promptText="Выберите склад назначения" 
                  maxWidth="Infinity" onAction="#handleTargetWarehouseSelected"/>
    </VBox>
    
    <VBox spacing="10" fx:id="targetShelfBox" visible="false" managed="false">
        <Label text="4. Выберите полку-приёмник:" style="-fx-font-weight: bold;"/>
        <ComboBox fx:id="targetShelfCombo" promptText="Выберите полку" 
                  maxWidth="Infinity"/>
    </VBox>

    <Separator/>

    <HBox spacing="10" alignment="CENTER_RIGHT">
        <Button text="Переместить" onAction="#handleMove" styleClass="primary-button" prefWidth="120"/>
        <Button text="Отмена" onAction="#handleCancel" prefWidth="100"/>
    </HBox>
</VBox>
